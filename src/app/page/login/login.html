<div class="login-page-container">
  <header class="page-header">
    <span class="logo-top">GamePoint</span>
    <span class="page-title">Login</span>
  </header>

  <main class="main-content">
    <div class="login-box-wrapper">
      <div class="character-image-container">
        <img src="/assets/images/dino.png" alt="Dinosaur Character" />
      </div>

      <div class="info-pane">
        <mat-card class="info-card">
          <h2>GamePoint</h2>
          <h3>บัญชีเดียวสำหรับบริการทั้งหมดของ GamePoint</h3>
          <p>
            สวัสดี! ลงทะเบียนบัญชีผู้ใช้และเพลิดเพลินกับประสบการณ์การเชื่อมต่อของคุณบน GamePoint.
          </p>
          <button mat-flat-button class="create-account-btn" routerLink="/register">
            สร้างบัญชีใหม่
          </button>
        </mat-card>
      </div>

      <div class="login-pane">
        <mat-card class="login-card">
          <mat-card-content>
            <h2 class="login-title">ลงชื่อเข้าใช้</h2>

            <!-- ===== 1. เชื่อมต่อฟอร์ม ===== -->
            <form [formGroup]="loginForm" (ngSubmit)="onSubmit()">
              <mat-form-field appearance="fill" class="login-field">
                <mat-icon matPrefix>person</mat-icon>
                <!-- ===== 2. เพิ่ม formControlName ===== -->
                <input matInput placeholder="ชื่อผู้ใช้" formControlName="username" />
              </mat-form-field>

              <mat-form-field appearance="fill" class="login-field">
                <mat-icon matPrefix>lock</mat-icon>
                <input
                  matInput
                  [type]="hidePassword ? 'password' : 'text'"
                  placeholder="รหัสผ่าน"
                  formControlName="password"
                />
                <button
                  type="button"
                  mat-icon-button
                  matSuffix
                  (click)="hidePassword = !hidePassword"
                >
                  <mat-icon>{{ hidePassword ? 'visibility_off' : 'visibility' }}</mat-icon>
                </button>
              </mat-form-field>

              <!-- ===== 4. ส่วนแสดงข้อความ Error ===== -->
              <div *ngIf="loginError" class="login-error-message">
                {{ loginError }}
              </div>

              <a href="#" class="forgot-password">ลืมรหัสผ่าน?</a>
              <div class="actions">
                <!-- ===== 5. เปลี่ยนปุ่มเป็น type="submit" ===== -->
                <button
                  mat-flat-button
                  class="login-btn"
                  type="submit"
                  [disabled]="loginForm.invalid"
                >
                  เข้าสู่ระบบ เพื่อเล่นเกมได้เลย
                </button>
              </div>
            </form>
          </mat-card-content>
        </mat-card>
      </div>
    </div>
  </main>
</div>
