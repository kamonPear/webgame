<nav class="navbar">
  <div class="navbar-container">
    <div class="navbar-left">
      <a href="/main" class="navbar-brand">GamePoint</a>
      <button
        *ngIf="isUserLoggedIn"
        mat-icon-button
        class="hamburger-menu-btn"
        (click)="toggleProfileSidebar()"
        aria-label="Open Profile Menu"
      >
        <mat-icon>menu</mat-icon>
      </button>
    </div>

    <div class="navbar-menu">
      <ul>
        <li *ngFor="let link of navLinks">
          <a
            [routerLink]="link.path"
            [class.active]="link.name === activeLink"
            (click)="setActiveLink(link.name)"
          >
            {{ link.name }}
          </a>
        </li>
      </ul>
    </div>

    <div class="navbar-right">
      <ng-container *ngIf="isUserLoggedIn; else notLoggedIn">
        <div class="navbar-search">
          <input type="text" placeholder="ค้นหา" />
        </div>
        <a routerLink="/cart" class="cart-button">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24"
            fill="currentColor"
          >
            <path
              d="M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.44C4.52 15.37 5.24 17 6.5 17h12v-2H6.5c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49A1.003 1.003 0 0 0 20.25 4H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z"
            />
          </svg>
        </a>
      </ng-container>

      <ng-template #notLoggedIn>
        <div class="auth-buttons">
          <button mat-stroked-button color="primary" routerLink="/login">เข้าสู่ระบบ</button>
          <button mat-flat-button color="primary" routerLink="/register">สมัครสมาชิก</button>
        </div>
      </ng-template>
    </div>
  </div>
</nav>

<div class="profile-overlay" [class.open]="isProfileOpen" (click)="toggleProfileSidebar()"></div>

<aside class="profile-sidebar" [class.open]="isProfileOpen">
  <div *ngIf="currentUser" class="profile-details">
    <div class="avatar-container">
      <img [src]="currentUser.ImageProfile" alt="User Avatar" />
    </div>
    <h2>ข้อมูลส่วนตัว</h2>
    <div class="info-field">
      <label>Name User</label>
      <div class="info-value">
        <mat-icon>person</mat-icon>
        <span>{{ currentUser.username }}</span>
      </div>
    </div>
    <div class="info-field">
      <label>Gmail User</label>
      <div class="info-value">
        <mat-icon>mail</mat-icon>
        <span>{{ currentUser.email }}</span>
      </div>
    </div>
    <div class="info-field">
      <label>Wallet Balance</label>
      <div class="info-value">
        <mat-icon>account_balance_wallet</mat-icon>
        <span>{{ currentUser.wallet | number : '1.2-2' }}</span>
      </div>
    </div>
  </div>

  <div class="sidebar-footer">
    <button mat-flat-button class="footer-btn primary-btn">
      <mat-icon>person</mat-icon>
      <span>แก้ไขโปรไฟล์</span>
    </button>
    <button mat-flat-button class="footer-btn primary-btn" routerLink="/main">
      <mat-icon>home</mat-icon>
      <span>หน้าหลัก</span>
    </button>
    <button mat-flat-button class="footer-btn secondary-btn" (click)="logout()">
      <mat-icon>exit_to_app</mat-icon>
      <span>ออกจากระบบ</span>
    </button>
  </div>
</aside>
